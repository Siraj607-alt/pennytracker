<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Please Login To see your Spendings!</title>
  <style>
    :root{
      --bg:#f4f6fb;
      --card:#fff;
      --accent:#4A90E2;
      --accent-dark:#357ABD;
      --success:#28a745;
      --muted:#6b7280;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      background:linear-gradient(180deg,#f7fbff 0%,var(--bg) 100%);
      background-image: url('/images/default.png');
       background-size: cover;
       background-position: center;
       background-repeat: no-repeat;;
    }
    .title-container {
    position: absolute;
    top: 40px;
    width: 100%;
    display: flex;
    justify-content: center;
}

.main-title {
    font-size: 48px;
    font-weight: 900;
    text-align: center;

    color: #ffffff;
    text-shadow:
        0px 2px 4px rgba(0, 0, 0, 0.45),
        0px 4px 12px rgba(0, 0, 0, 0.35);

    padding: 12px 28px;
    border-radius: 14px;

    background: rgba(0, 0, 0, 0.35); /* simple, modern overlay */
    backdrop-filter: blur(5px);

    display: inline-block;
}



.card {
    width: 420px;
    padding: 30px 28px;

    /* Glass effect */
    background: rgba(255, 255, 255, 0.18);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);

    /* White border */
    border: 1.5px solid rgba(255, 255, 255, 0.65);

    /* Neon glow */
    box-shadow:
        0 0 12px rgba(0, 200, 255, 0.35),
        0 0 22px rgba(0, 200, 255, 0.25),
        0 0 40px rgba(0, 200, 255, 0.20);

    border-radius: 14px;
    text-align: center;

    /* Glow animation (optional) */
    animation: neonPulse 3s infinite ease-in-out;
}

@keyframes neonPulse {
    0% {
        box-shadow:
            0 0 12px rgba(0, 200, 255, 0.35),
            0 0 22px rgba(0, 200, 255, 0.25),
            0 0 40px rgba(0, 200, 255, 0.20);
    }
    50% {
        box-shadow:
            0 0 18px rgba(0, 200, 255, 0.55),
            0 0 30px rgba(0, 200, 255, 0.45),
            0 0 50px rgba(0, 200, 255, 0.35);
    }
    100% {
        box-shadow:
            0 0 12px rgba(0, 200, 255, 0.35),
            0 0 22px rgba(0, 200, 255, 0.25),
            0 0 40px rgba(0, 200, 255, 0.20);
    }
}
.card input{
color: #000000 !important; /* black text */


}

.card label,
.card h1,
.card p,
.card .error,
.card .ok {
    color: #ffffff !important; /* white text for dark background */
}
input[type="text"],
input[type="email"],
input[type="password"] {
    width: 100%;
    padding: 12px 14px;
    border-radius: 8px;

    background: rgba(255, 255, 255, 0.85); /* visible box */
    border: 1px solid rgba(0, 0, 0, 0.2);

    color: #000; /* input text black */

    font-size: 14px;
    outline: none;
    transition: 0.2s;
}

input:focus {
    border-color: #4b73ff;
    box-shadow: 0 0 5px rgba(75, 115, 255, 0.4);
}




    h1{
      margin:0 0 12px 0;
      font-size:20px;
      color:#111827;
      letter-spacing:0.2px;
    }
    p.subtitle{
      margin:0 0 20px 0;
      color:var(--muted);
      font-size:13px;
    }

    form .field{
      position:relative;
      margin-bottom:20px;
    }

    label{
      display:block;
      font-size:13px;
      color:#374151;
      margin-bottom:8px;
    }

    input[type="text"],
    input[type="date"],
    input[type="email"]{
      width:100%;
      padding:12px 14px;
      border-radius:10px;
      border:1px solid #e6e9ef;
      background:linear-gradient(180deg,#fff,#fbfdff);
      font-size:14px;
      outline:none;
      transition: box-shadow .12s ease, border-color .12s ease, transform .06s ease;
      box-sizing:border-box;
    }

    /* focus effect */
    input:focus{
      border-color:var(--accent);
      box-shadow:0 6px 18px rgba(74,144,226,0.12);
      transform: translateY(-1px);
    }

    /* hint / validation area under each input */
    .validation {
      height:18px;
      margin-top:8px;
      display:flex;
      align-items:center;
      gap:8px;
      font-size:13px;
      color:var(--muted);
    }

    /* tick icon container */
    .tick {
      width:18px;
      height:18px;
      border-radius:50%;
      display:inline-grid;
      place-items:center;
      background:transparent;
      transform:scale(0.2);
      opacity:0;
      transition: all .18s cubic-bezier(.2,.9,.3,1);
    }
    /* Field Wrapper */
.field {
  margin-bottom: 22px;
  width: 100%;
  max-width: 380px;
  position: relative;
}

/* Label */
.field label {
  display: block;
  margin-bottom: 6px;
  font-weight: 600;
  color: #1c1c1e;
  font-size: 14px;
}

/* Input Box */
.field input {
  width: 100%;
  padding: 12px 14px;
  border-radius: 8px;
  border: 1.5px solid #d0d0d0;
  font-size: 15px;
  transition: all 0.25s ease;
  background: #fafafa;
}

.field input:focus {
  border-color: #4b73ff;
  box-shadow: 0 0 0 3px rgba(75, 115, 255, 0.15);
  outline: none;
}


    /* when valid, show tick */
    .tick.show {
      transform:scale(1);
      opacity:1;
      background:linear-gradient(135deg,var(--success), #1f9a3a);
      box-shadow: 0 6px 18px rgba(34,197,94,0.15), inset 0 -4px 10px rgba(0,0,0,0.05);
    }

    .tick svg{ width:12px;height:12px; fill:white; transform:translateY(1px); }

    /* success text */
    .ok { color:var(--success); font-weight:600; font-size:13px; opacity:0; transform:translateX(-4px); transition:all .15s ease;}
    .ok.show { opacity:1; transform:translateX(0); }

    /* error text */
    .error { color:#e11d48; font-size:13px; opacity:0; transform:translateX(-4px); transition:all .15s ease; }
    .error.show { opacity:1; transform:translateX(0); }

    /* submit */
    button[type="submit"]{
      width:100%;
      padding:12px;
      border-radius:10px;
      border:0;
      background:var(--accent);
      color:white;
      font-weight:600;
      font-size:15px;
      cursor:pointer;
      box-shadow: 0 8px 24px rgba(53,122,189,0.12);
      transition:background .12s ease, transform .06s ease;
    }
    button[type="submit"]:active{ transform:translateY(1px); }
    button[type="submit"]:hover{ background:var(--accent-dark); }

    .small{
      margin-top:12px;
      font-size:13px;
      color:#ffffff;
      text-align:center;
    }

    /* small responsive */
    @media (max-width:420px){
      .card{ width:92%; padding:20px; }
    }
    /* FINAL LOGIN CARD STYLE — this overrides old card */
.card {
    width: 420px;
    padding: 32px 36px;

    /* Dark glass card for visibility */

    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);

    /* Clean neon border */
    border: 2px solid rgba(0, 255, 255, 0.65) !important;
    border-radius: 16px;

    /* Glow effect */
    box-shadow:
        0 0 12px rgba(0, 255, 255, 0.7),
        0 0 35px rgba(0, 255, 255, 0.3);

    position: relative;
    z-index: 10;
}
.signup-link {
    color: #ffffff !important;
}

    .forgot-link {
  display:block;
  text-align:right;
  font-size:14px;
  color:#4A90E2;
  margin-top:8px;
  text-decoration:none;
}
.forgot-link:hover {
  text-decoration:underline;
}
/* ===== FINAL INPUT FIX ===== */
.field input {
    color: #111827;               /* visible text */
    background: #ffffff;          /* solid background */
    border: 1.5px solid #d0d0d0;
}

.field input::placeholder {
    color: #6b7280;
}

.field input:focus {
    border-color: #4A90E2;
    box-shadow: 0 0 0 3px rgba(74,144,226,0.2);
}

/* Password dots */
input[type="password"] {
    -webkit-text-security: disc;
    color: #111827;
}
  /* ===== POPUP OVERLAY ===== */
.success-popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.75);
  backdrop-filter: blur(6px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}

/* ===== POPUP CARD ===== */
.popup-card {
  width: 420px;
  padding: 36px 32px;
  border-radius: 20px;
  text-align: center;

  background: rgba(255,255,255,0.97);
  color: #111827;

  box-shadow:
    0 30px 70px rgba(0,0,0,0.5),
    inset 0 1px 0 rgba(255,255,255,0.6);

  animation: popupFade 0.35s ease-out;
}

/* GREEN CHECK */
.popup-check {
  width: 84px;
  height: 84px;
  margin: 0 auto 18px;

  background: linear-gradient(135deg,#22c55e,#16a34a);
  color: white;
  font-size: 44px;
  font-weight: 900;

  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  box-shadow: 0 12px 30px rgba(34,197,94,0.5);
}

/* TEXT */
.popup-card h2 {
  margin: 0 0 10px;
  font-size: 24px;
  font-weight: 700;
}

.popup-card p {
  font-size: 14px;
  color: #374151;
  margin-bottom: 24px;
  line-height: 1.5;
}

/* BUTTON */
.popup-card button {
  width: 100%;
  padding: 12px;
  border-radius: 12px;
  border: none;

  background: linear-gradient(180deg,#4A90E2,#357ABD);
  color: white;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
}

/* ANIMATION */
@keyframes popupFade {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
    /* FORCE Sign Up link to white in ALL states */
.small a,
.small a:link,
.small a:visited,
.small a:hover,
.small a:active {
    color: #ffffff !important;
    text-decoration: none;
}



  </style>
</head>
<body>
<!-- PASSWORD RESET SUCCESS POPUP -->
<div class="title-container">
  <h1 class="main-title">Penny Tracker</h1>
</div>

<div class="card" role="form">
  <h1>Please Login to see your Spendings!</h1>

  <!-- form posts to /savemyinfo -->
  <form id="infoForm" action="/doLogin" method="POST" novalidate>
    <div th:if="${loginError}"
         style="color:#e11d48; margin-bottom:12px; font-weight:600;">
      <p th:text="${loginError}"></p>
    </div>

    <!-- GMAIL -->
    <div class="field">
      <label for="email">Gmail</label>
      <input id="email" name="email" type="email" autocomplete="email" placeholder="yourname@gmail.com" required />
      <div class="validation" aria-live="polite">
        <div class="tick" id="tick-email"><svg viewBox="0 0 24 24"><path d="M20.285 6.709a1 1 0 0 0-1.414-1.418L9 15.17 5.129 11.3a1 1 0 1 0-1.415 1.415l4.293 4.293a1 1 0 0 0 1.414 0L20.285 6.71z"/></svg></div>
        <div class="ok" id="ok-email">Email accepted</div>
        <div class="error" id="err-email">Use a valid Gmail address ending with @gmail.com</div>
      </div>
    </div>
    <div class="field">
      <label for="password">Password</label>
      <input
              id="password"
              name="password"
              type="password"
              autocomplete="new-password"
              placeholder="Enter Your Password Here"
              required
      />

      <div class="validation" aria-live="polite">
        <div class="tick" id="tick-password">
          <svg viewBox="0 0 24 24">
            <path d="M20.285 6.709a1 1 0 0 0-1.414-1.418L9 15.17 5.129 11.3a1 1 0 1 0-1.415 1.415l4.293 4.293a1 1 0 0 0 1.414 0L20.285 6.71z"/>
          </svg>
        </div>

        <div class="ok" id="ok-password">Password Accepted</div>

        <div class="error" id="err-password">
          Password must be at least 6 characters
        </div>
      </div>
    </div>

    <button type="submit">Submit</button>
    <p class="small">
      Don’t have an account?
      <a href="/signup">Sign Up</a>
    </p>
    <div class="forgot-box">
      <a href="/forgot-password" class="forgot-link">
        Forgot password?
      </a>
    </div>
    <div th:if="${success}" class="success-popup">
      ✔ <span th:text="${success}"></span>
    </div>


  </form>
</div>

<script>
  (function(){

    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById("password");

    const form = document.getElementById('infoForm');

    // helpers: toggle states
    function showValid(idPrefix){
      document.getElementById('tick-'+idPrefix).classList.add('show');
      document.getElementById('ok-'+idPrefix).classList.add('show');
      document.getElementById('err-'+idPrefix).classList.remove('show');
    }
    function showInvalid(idPrefix){
      document.getElementById('tick-'+idPrefix).classList.remove('show');
      document.getElementById('ok-'+idPrefix).classList.remove('show');
      document.getElementById('err-'+idPrefix).classList.add('show');
    }

    // validation rules
    function validateGmail(v){
      if(!v) return false;
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if(!re.test(v)) return false;
      return v.toLowerCase().endsWith('@gmail.com');
    }

    // NEW PASSWORD VALIDATION (your requested rule)
    function validatePassword(v){
      if(!v) return false;
      return v.length >= 6;  // simple rule
    }

    // wire events
    emailInput.addEventListener('input', () => {
      validateGmail(emailInput.value) ? showValid('email') : showInvalid('email');
    });

    // NEW: password live validation
    passwordInput.addEventListener('input', () => {
      validatePassword(passwordInput.value)
        ? showValid('password')
        : showInvalid('password');
    });

    // on submit: double-check everything
    form.addEventListener('submit', (e) => {

      const em = emailInput.value;
      const pw = passwordInput.value;

      const isEmail = validateGmail(em);
      const isPassword = validatePassword(pw);

      if(!isEmail) showInvalid('email'); else showValid('email');
      if(!isPassword) showInvalid('password'); else showValid('password');

      if(!(isEmail && isPassword)){
        e.preventDefault();
        // focus first invalid
        if(!isEmail) emailInput.focus();
        else if(!isPassword) passwordInput.focus();
        return false;
      }

      // allow normal POST
    });

    // initial prefill check
    if(emailInput.value) emailInput.dispatchEvent(new Event('input'));
    if(passwordInput.value) passwordInput.dispatchEvent(new Event('input'));

  })();
 function closePopup() {
    const popup = document.getElementById("resetSuccessPopup");
    if (popup) popup.style.display = "none";
  }

 document.addEventListener("DOMContentLoaded", () => {

  const popup = document.getElementById("resetSuccessPopup");
  const loginBtn = document.getElementById("popupLoginBtn");

  if (!popup) return; // no popup shown


</script>

</body>
</html>
